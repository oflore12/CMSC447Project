{% extends 'base.html' %}
{% import 'search_bar.html' as search_bar %}

{% block title %}Search{% endblock %}

{% block content %}
{{ search_bar.mainSearchBar(q, provider) }}

{% for r in results %}
<div style="margin-bottom: 50px">
	<h4>{{r.title}}</h4>

	{% if r.providers.get(country).buy %}
	<div class = "provRow">
		<div class = "provColumn vertical">BUY</div>
		<div class = "provColumn"> 
			{% for b in r.providers.get(country).buy %}
			<div class = "iconContainer">
				{% set imageUrl = "https://image.tmdb.org/t/p/w500/" + b.logo_path %}
				<img src="{{imageUrl}}" alt="streaming service logo" width="75" height="75" />
				<!--<span>{{b.provider_name}}</span>-->
			</div>
		{% endfor %}
		</div>
	</div>
	{% endif %}

	{% if r.providers.get(country).flatrate %}
	<div class = "provRow">
		<div class = "provColumn vertical">STREAM</div>
		<div class = "provColumn"> 
			{% for f in r.providers.get(country).flatrate %}
			<div class = "iconContainer">
				{% set imageUrl = "https://image.tmdb.org/t/p/w500/" + f.logo_path %}
				<img src="{{imageUrl}}" alt="streaming service logo" width="75" height="75" />
				<!--<<span>{{f.provider_name}}</span>-->
			</div>
			{% endfor %}
		</div>
	</div>
	{% endif %}

	{% if r.providers.get(country).rent %}
	<div class = "provRow">
		<div class = "provColumn vertical">RENT</div>
		<div class = "provColumn"> 
			{% for p in r.providers.get(country).rent %}
			<div class = "iconContainer">
				{% set imageUrl = "https://image.tmdb.org/t/p/w500/" + p.logo_path %}
				<img src="{{imageUrl}}" alt="streaming service logo" width="75" height="75" />
				<!--<<span>{{p.provider_name}}</span>-->
			</div>
			{% endfor %}
		</div>
	</div>
	{% endif %}

	{% if r.providers.get(country).free %}
	<div class = "provRow">
		<div class = "provColumn vertical">FREE</div>
		<div class = "provColumn"> 
			{% for f in r.providers.get(country).free %}
			<div class = "iconContainer">
				{% set imageUrl = "https://image.tmdb.org/t/p/w500/" + f.logo_path %}
				<img src="{{imageUrl}}" alt="streaming service logo" width="75" height="75" />
				<!--<<span>{{f.provider_name}}</span>-->
			</div>
			{% endfor %}
		</div>
	</div>
	{% endif %}

	{% if r.providers.get(country).ads %}
	<div class = "provRow">
		<div class = "provColumn vertical">ADS</div>
		<div class = "provColumn"> 
			{% for a in r.providers.get(country).ads %}
			<div class = "iconContainer">
				{% set imageUrl = "https://image.tmdb.org/t/p/w500/" + a.logo_path %}
				<img src="{{imageUrl}}" alt="streaming service logo" width="75" height="75" />
				<!--<<span>{{a.provider_name}}</span>-->
			</div>
			{% endfor %}
		</div>
	</div>
	{% endif %}

	{% if not r.providers.get(country) %}
	Not available from any streaming providers
	{% endif %}
</div>
{% endfor %}
{% endblock %}